<odoo>
  <record id="view_move_form_inherit_invoice_to_task_button_wizard_add" model="ir.ui.view">
    <field name="name">account.move.form.inherit.invoice.to.task.button.wizard.add</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="arch" type="xml">
      <header position="inside">
        <button name="action_open_task_wizard"
                string="Créer tâche projet (choisir projet)"
                type="object"
                class="btn-secondary"
                modifiers='{"invisible": ["|", "|",
                  ["move_type", "not in", ["out_invoice", "out_refund"]],
                  ["state", "!=", "posted"],
                  ["payment_state", "!=", "paid"]
                ]}'/>
      </header>
      <!-- On ne référence que des champs natifs -->
      <xpath expr="//sheet" position="inside">
        <field name="payment_state" invisible="1"/>
      </xpath>
    </field>
  </record>
</odoo>
